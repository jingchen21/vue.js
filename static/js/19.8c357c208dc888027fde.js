webpackJsonp([19],{MwKK:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("bread-crumb"),e._v(" "),o("div",{staticClass:"container"},[o("div",{staticClass:"form-box"},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",align:"left"}},[o("el-form-item",{attrs:{label:"角色名称"}},[o("el-input",{model:{value:e.form.RoleName,callback:function(t){e.$set(e.form,"RoleName",t)},expression:"form.RoleName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"角色优先权"}},[o("el-input",{model:{value:e.form.Sort,callback:function(t){e.$set(e.form,"Sort",t)},expression:"form.Sort"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"角色模块"}},[[o("el-checkbox",{attrs:{label:"selectAll",name:"selectAll"},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}},[e._v("全选")]),e._v(" "),o("br"),e._v(" "),o("el-checkbox-group",{model:{value:e.form.moduleIds,callback:function(t){e.$set(e.form,"moduleIds",t)},expression:"form.moduleIds"}},e._l(e.modulesList,function(t){return o("el-checkbox",{attrs:{label:t.Id,name:""+t.Id}},[e._v(e._s(t.ModuleName))])}))]],2),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.submitSave}},[e._v("保存")])],1)],1)],1)])],1)},staticRenderFns:[]};var s=o("VU/8")({data:function(){return{form:{Id:"",RoleName:"",Sort:"",moduleIds:[]},modulesList:[]}},computed:{selectAll:{get:function(){return this.form.moduleIds.length===this.modulesList.length},set:function(e){this.form.moduleIds=e?this.modulesList.map(function(e){return e.Id}):[]}}},methods:{formateDatas:function(e){for(var t in this.form.moduleIds=e.roleModules.map(function(e){return e.Id}),e.role)this.form.hasOwnProperty(t)&&(this.form[t]=e.role[t])},getModules:function(){var e=this;this.MyTools.$ajax.get.call(this,"/Module/GetModules",function(t){0==t.data.code?e.modulesList=t.data.datas:e.$message.error(t.data.msg)})},submitSave:function(){var e=this;this.MyTools.$ajax.post.call(this,"/Role/Edit",this.form,function(t){0==t.data.code?(e.$message.success(t.data.msg),e.$router.push("/roleModule")):e.$message.error(t.data.msg)})}},created:function(){var e=this;this.MyTools.$ajax.get.call(this,"/role/Edit?id="+this.$route.params.id,function(t){0==t.data.code&&(e.modulesList=t.data.datas.moduleList,e.formateDatas(t.data.datas.role))})}},l,!1,function(e){o("ybC0")},null,null);t.default=s.exports},ybC0:function(e,t){}});